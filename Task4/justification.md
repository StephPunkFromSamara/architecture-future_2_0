# Обоснование выбора конфигурации инфраструктуры

## 1. Выбор ресурсов и параметров

### Виртуальные машины (VM)

- Виртуальные машины выбраны с **Linux (Ubuntu 22.04 LTS)** для надёжной и широко поддерживаемой среды.
- Каждая VM имеет **2 ядра процессора и 2 ГБ оперативной памяти** (для полномасштабной платформы нужно считать конкретные сервисы), что оптимально для тестового и средне-нагруженного приложения. Такой размер позволяет:
    - Эффективно запускать контейнеры Docker и Kubernetes.
    - Поддерживать базовые сервисы (PostgreSQL, MSSQL) без перегрузки ресурсов.
- Используется **boot_disk размером 20 ГБ**, что достаточно для операционной системы и установки контейнеров с приложениями.

### Контейнеризация

- На каждой VM планируется запуск контейнеров через **Docker + Kubernetes**, что обеспечивает:
    - Лёгкую изоляцию сервисов.
    - Масштабирование приложений без изменения базовой VM.

### Сети и NAT

- Созданы **VPC-сеть и подсеть** для изоляции внутреннего трафика.
- Настройка **NAT (Network Address Translation)** обеспечивает выход VM в интернет:
    - Для обновления контейнеров и загрузки зависимостей.
    - Для доступа приложений к внешним сервисам.
- Возможность подключения VPN для отдельных сегментов сети обеспечивает безопасный доступ сотрудников и сервисов к внутренним ресурсам.

### Базы данных

- В конфигурации предусмотрены **PostgreSQL и MSSQL**, развертываемые на VM или контейнерах.
- Использование отдельных дисков и настройка persistent storage обеспечивают надёжность данных.

---

## 2. Причины использования декларативного подхода

- Terraform позволяет описывать инфраструктуру **в виде кода**, а не выполнять ручные шаги через UI.
- Все ресурсы, параметры и зависимости описаны декларативно, что обеспечивает:
    - **Повторяемость**: инфраструктуру можно создавать в одинаковом виде на разных средах.
    - **Прозрачность**: легко видеть, какие ресурсы создаются и с какими параметрами.
    - **Контроль версий**: изменения инфраструктуры можно хранить в системе контроля версий (например, Git).

---

## 3. Преимущества подхода Infrastructure as Code (IaC)

1. **Воспроизводимость**
    - Любой разработчик или DevOps-инженер может развернуть идентичную среду на другом облаке или регионе, используя один и тот же Terraform-код.

2. **Масштабируемость**
    - Новые VM, сети или базы данных можно добавить простым изменением конфигурации, без ручного копирования настроек.

3. **Автоматизация и снижение ошибок**
    - Отсутствие ручного ввода минимизирует человеческие ошибки.
    - Terraform автоматически учитывает зависимости между ресурсами (например, VM зависит от сети и диска).

4. **Документирование инфраструктуры**
    - Конфигурационные файлы служат одновременной документацией и планом инфраструктуры, что упрощает аудит и поддержку.

---

## 4. Вывод

Использование **Terraform и подхода IaC** позволяет создавать инфраструктуру, которая:

- Надёжна, предсказуема и повторяема.
- Масштабируема для будущих проектов.
- Снижает риски ошибок при ручном развертывании.
- Обеспечивает прозрачность всех ресурсов и их параметров.